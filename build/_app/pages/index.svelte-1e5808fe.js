var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(e,n,s)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s;import{S as a,i,s as c,e as u,j as f,c as d,a as h,m as p,d as m,b as v,f as g,o as $,I as E,H as b,v as w,r as x,w as T,k as y,t as O,n as L,g as D,G as j,J as k,B as S,u as N,h as P,K as I,L as _,T as A,M as B,N as U,O as z,P as R,l as V,Q as C,R as M,U as X,V as Y,W as q,X as G,Y as Z,Z as H,_ as J,$ as K,a0 as Q}from"../chunks/vendor-b5f9722e.js";import{a as W,g as F,b as tt}from"../chunks/actionsStore-7780aa00.js";import"../chunks/singletons-bb9012b7.js";function et(t){let e,n,s,l,o;return n=new A({props:{size:"24"}}),{c(){e=u("button"),f(n.$$.fragment),this.h()},l(t){e=d(t,"BUTTON",{class:!0});var s=h(e);p(n.$$.fragment,s),s.forEach(m),this.h()},h(){v(e,"class","fixed top-4 right-4")},m(r,a){g(r,e,a),$(n,e,null),s=!0,l||(o=E(e,"click",t[4]),l=!0)},p:b,i(t){s||(w(n.$$.fragment,t),s=!0)},o(t){x(n.$$.fragment,t),s=!1},d(t){t&&m(e),T(n),l=!1,o()}}}function nt(t){var e;let n,s,l,o,r,a,i,c,f,p,$,b,T,_,A,B=t[0]._id?"Save":"Add",U=(null==(e=t[0])?void 0:e._id)&&et(t);return{c(){n=u("div"),U&&U.c(),s=y(),l=u("input"),o=y(),r=u("textarea"),a=y(),i=u("div"),c=u("button"),f=O("Cancel"),p=y(),$=u("button"),b=O(B),this.h()},l(t){n=d(t,"DIV",{class:!0});var e=h(n);U&&U.l(e),s=L(e),l=d(e,"INPUT",{class:!0,type:!0,placeholder:!0}),o=L(e),r=d(e,"TEXTAREA",{class:!0,placeholder:!0}),h(r).forEach(m),a=L(e),i=d(e,"DIV",{class:!0});var u=h(i);c=d(u,"BUTTON",{class:!0});var v=h(c);f=D(v,"Cancel"),v.forEach(m),p=L(u),$=d(u,"BUTTON",{class:!0});var g=h($);b=D(g,B),g.forEach(m),u.forEach(m),e.forEach(m),this.h()},h(){v(l,"class","w-full border-2 p-1 rounded"),v(l,"type","text"),v(l,"placeholder","Title"),v(r,"class","w-full h-40 border-2 rounded"),v(r,"placeholder","Description text"),v(c,"class","form-button svelte-17fiqwu"),v($,"class","form-button svelte-17fiqwu"),v(i,"class","box-border w-full bottom-2 inline-flex gap-20 justify-center mb-4 mt-4"),v(n,"class","fixed z-50 right-0 left-0 bottom-0 top-0 p-4 inline-flex justify-end flex-col gap-2 bg-white")},m(e,u){g(e,n,u),U&&U.m(n,null),j(n,s),j(n,l),k(l,t[1]),j(n,o),j(n,r),k(r,t[2]),j(n,a),j(n,i),j(i,c),j(c,f),j(i,p),j(i,$),j($,b),T=!0,_||(A=[E(l,"input",t[5]),E(r,"input",t[6]),E(c,"click",t[7]),E($,"click",t[8])],_=!0)},p(t,[e]){var o;(null==(o=t[0])?void 0:o._id)?U?(U.p(t,e),1&e&&w(U,1)):(U=et(t),U.c(),w(U,1),U.m(n,s)):U&&(S(),x(U,1,1,(()=>{U=null})),N()),2&e&&l.value!==t[1]&&k(l,t[1]),4&e&&k(r,t[2]),(!T||1&e)&&B!==(B=t[0]._id?"Save":"Add")&&P(b,B)},i(t){T||(w(U),T=!0)},o(t){x(U),T=!1},d(t){t&&m(n),U&&U.d(),_=!1,I(A)}}}function st(t,a,i){let{action:c}=a,u=c.title,f=c.description;const d=_();console.log("action",c);return t.$$set=t=>{"action"in t&&i(0,c=t.action)},[c,u,f,d,()=>{W.remove(c),d("cancel")},function(){u=this.value,i(1,u)},function(){f=this.value,i(2,f)},()=>d("cancel"),()=>{return d("add",(t=((t,e)=>{for(var n in e||(e={}))l.call(e,n)&&r(t,n,e[n]);if(s)for(var n of s(e))o.call(e,n)&&r(t,n,e[n]);return t})({},c),e(t,n({title:u,description:f}))));var t}]}class lt extends a{constructor(t){super(),i(this,t,st,nt,c,{action:0})}}function ot(t){let e,n,s,l,o=t[0].title+"";return{c(){e=u("div"),n=O(o),this.h()},l(t){e=d(t,"DIV",{class:!0});var s=h(e);n=D(s,o),s.forEach(m),this.h()},h(){v(e,"class","p-2 shadow-md border rounded")},m(o,r){g(o,e,r),j(e,n),s||(l=E(e,"click",t[1]),s=!0)},p(t,[e]){1&e&&o!==(o=t[0].title+"")&&P(n,o)},i:b,o:b,d(t){t&&m(e),s=!1,l()}}}function rt(t,e,n){let{action:s={}}=e;return t.$$set=t=>{"action"in t&&n(0,s=t.action)},[s,function(e){B.call(this,t,e)}]}class at extends a{constructor(t){super(),i(this,t,rt,ot,c,{action:0})}}function it(t,e=400){let n,s;const l=()=>{clearTimeout(n)},o=t=>{const e=t.touches?t.touches[0]:t;let l=e.clientX,o=e.clientY,r=l-s.x,a=o-s.y;r*r+a*a>50&&clearTimeout(n)},r=a=>{const i=a.touches?a.touches[0]:a;s={x:i.clientX,y:i.clientY},n=setTimeout((()=>{t.removeEventListener("mousedown",r),t.removeEventListener("touchStart",r),t.removeEventListener("mouseup",l),t.removeEventListener("touchend",l),t.dispatchEvent(new CustomEvent("longpress",{detail:{startDragPosition:s}}))}),e),t.addEventListener("mouseup",l),t.addEventListener("mousemove",o),t.addEventListener("touchend",l),t.addEventListener("touchmove",o)};return t.addEventListener("mousedown",r),t.addEventListener("touchstart",r),{update(t){e=t},destroy(){t.removeEventListener("mousedown",r),t.removeEventListener("touchStart",r),t.removeEventListener("mouseup",l),t.removeEventListener("touchend",l),t.removeEventListener("mousemove",o)}}}function ct(t,e,n){const s=t.slice();return s[8]=e[n],s}function ut(t,e){let n,s,l,o,r,a,i,c=b;return s=new at({props:{action:e[8]}}),s.$on("click",(function(){X(e[6](e[8]))&&e[6](e[8]).apply(this,arguments)})),{key:t,first:null,c(){n=u("span"),f(s.$$.fragment),l=y(),this.h()},l(t){n=d(t,"SPAN",{});var e=h(n);p(s.$$.fragment,e),l=L(e),e.forEach(m),this.h()},h(){this.first=n},m(t,e){g(t,n,e),$(s,n,null),j(n,l),r=!0,a||(i=U(it.call(null,n)),a=!0)},p(t,n){e=t;const l={};1&n&&(l.action=e[8]),s.$set(l)},r(){o=n.getBoundingClientRect()},f(){z(n),c()},a(){c(),c=R(n,o,q,{duration:mt})},i(t){r||(w(s.$$.fragment,t),r=!0)},o(t){x(s.$$.fragment,t),r=!1},d(t){t&&m(n),T(s),a=!1,i()}}}function ft(t){let e,n,s,l,o,r,a;s=new J({props:{size:t[0].length?"16":"24"}});let i=t[0].length&&ht(t);return{c(){e=u("div"),n=u("button"),f(s.$$.fragment),l=y(),i&&i.c(),this.h()},l(t){e=d(t,"DIV",{class:!0});var o=h(e);n=d(o,"BUTTON",{class:!0});var r=h(n);p(s.$$.fragment,r),r.forEach(m),l=L(o),i&&i.l(o),o.forEach(m),this.h()},h(){v(n,"class","fab svelte-1hxo9nt"),K(n,"small",!!t[0].length),v(e,"class","fixed bottom-4 right-4 gap-3 items-center inline-flex flex-col")},m(c,u){g(c,e,u),j(e,n),$(s,n,null),j(e,l),i&&i.m(e,null),o=!0,r||(a=E(n,"click",t[5]),r=!0)},p(t,l){const o={};1&l&&(o.size=t[0].length?"16":"24"),s.$set(o),1&l&&K(n,"small",!!t[0].length),t[0].length?i?(i.p(t,l),1&l&&w(i,1)):(i=ht(t),i.c(),w(i,1),i.m(e,null)):i&&(S(),x(i,1,1,(()=>{i=null})),N())},i(t){o||(w(s.$$.fragment,t),w(i),o=!0)},o(t){x(s.$$.fragment,t),x(i),o=!1},d(t){t&&m(e),T(s),i&&i.d(),r=!1,a()}}}function dt(t){let e,n;return e=new lt({props:{action:t[1]}}),e.$on("add",t[2]),e.$on("cancel",t[3]),{c(){f(e.$$.fragment)},l(t){p(e.$$.fragment,t)},m(t,s){$(e,t,s),n=!0},p(t,n){const s={};2&n&&(s.action=t[1]),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ht(t){let e,n,s,l,o;return n=new Q({props:{size:"24"}}),{c(){e=u("button"),f(n.$$.fragment),this.h()},l(t){e=d(t,"BUTTON",{class:!0});var s=h(e);p(n.$$.fragment,s),s.forEach(m),this.h()},h(){v(e,"class","p-4 fab svelte-1hxo9nt")},m(r,a){g(r,e,a),$(n,e,null),s=!0,l||(o=E(e,"click",t[4]),l=!0)},p:b,i(t){s||(w(n.$$.fragment,t),s=!0)},o(t){x(n.$$.fragment,t),s=!1},d(t){t&&m(e),T(n),l=!1,o()}}}function pt(t){let e,n,s,l,o,r,a,i,c,f=[],p=new Map,$=t[0];const b=t=>t[8]._id;for(let u=0;u<$.length;u+=1){let e=ct(t,$,u),n=b(e);p.set(n,f[u]=ut(n,e))}const T=[dt,ft],O=[];function D(t,e){return t[1]?0:1}return l=D(t),o=O[l]=T[l](t),{c(){e=u("div");for(let t=0;t<f.length;t+=1)f[t].c();s=y(),o.c(),r=V(),this.h()},l(t){e=d(t,"DIV",{class:!0});var n=h(e);for(let e=0;e<f.length;e+=1)f[e].l(n);n.forEach(m),s=L(t),o.l(t),r=V(),this.h()},h(){v(e,"class","p-4 flex-col inline-flex gap-2 w-full relative")},m(o,u){g(o,e,u);for(let t=0;t<f.length;t+=1)f[t].m(e,null);g(o,s,u),O[l].m(o,u),g(o,r,u),a=!0,i||(c=[U(n=C.call(null,e,{items:t[0],flipDurationMs:mt,customStartEvent:"longpress"})),E(e,"consider",t[7]),E(e,"finalize",t[7])],i=!0)},p(t,[s]){if(65&s){$=t[0],S();for(let t=0;t<f.length;t+=1)f[t].r();f=M(f,s,b,1,t,$,p,e,G,ut,null,ct);for(let t=0;t<f.length;t+=1)f[t].a();N()}n&&X(n.update)&&1&s&&n.update.call(null,{items:t[0],flipDurationMs:mt,customStartEvent:"longpress"});let a=l;l=D(t),l===a?O[l].p(t,s):(S(),x(O[a],1,1,(()=>{O[a]=null})),N(),o=O[l],o?o.p(t,s):(o=O[l]=T[l](t),o.c()),w(o,1),o.m(r.parentNode,r))},i(t){if(!a){for(let t=0;t<$.length;t+=1)w(f[t]);w(o),a=!0}},o(t){for(let e=0;e<f.length;e+=1)x(f[e]);x(o),a=!1},d(t){t&&m(e);for(let e=0;e<f.length;e+=1)f[e].d();t&&m(s),O[l].d(t),t&&m(r),i=!1,I(c)}}}const mt=50;function vt(t,e,n){let s;Y(t,tt,(t=>n(0,s=t)));let l=null;return t.$$.update=()=>{1&t.$$.dirty&&console.log("$actionsStore",s)},[s,l,({detail:t})=>{n(1,l=null),W.save(t)},()=>{n(1,l=null)},()=>{F("/focus")},()=>{n(1,l={title:"",description:""})},t=>()=>{n(1,l=t)},function({detail:t,info:e}){Z(tt,s=t.items,s),t.info.trigger,H.DRAG_STARTED,t.info.trigger.includes("dropped")&&console.log("stopped"),t.info.trigger===H.DROPPED_INTO_ZONE&&W.reorder(t.items)}]}export default class extends a{constructor(t){super(),i(this,t,vt,pt,c,{})}}
