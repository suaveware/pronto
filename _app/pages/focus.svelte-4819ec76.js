import{S as t,i as e,s as a,e as s,t as n,c as l,a as r,g as i,d as o,b as c,f as u,K as f,h as d,M as h,L as m,I as p,D as $,A as g,al as v,B as x,T as w,am as k,an as I,j as b,m as E,o as P,$ as D,x as y,u as T,v as V,a6 as O,a7 as U,k as F,n as L,N as S,ao as z,w as G,l as N,aa as j,Z as A,Q as q,ab as B,ap as M,V as K,a1 as Q,aq as R,ac as Y,r as Z,ar as _,a3 as C,as as H,at as J}from"../chunks/vendor-0e668582.js";import{a as W,g as X,s as tt,f as et}from"../chunks/state-dea3628e.js";function at(t){let e,a,m;return{c(){e=s("div"),a=n(t[0]),this.h()},l(s){e=l(s,"DIV",{class:!0});var n=r(e);a=i(n,t[0]),n.forEach(o),this.h()},h(){c(e,"class",m=t[1].class)},m(t,s){u(t,e,s),f(e,a)},p(t,[s]){1&s&&d(a,t[0]),2&s&&m!==(m=t[1].class)&&c(e,"class",m)},i:h,o:h,d(t){t&&o(e)}}}function st(t,e,a){let s,n=0,{timeFormat:l="hh:mm:ss"}=e,{intervals:r=m()}=e,{isPaused:i=!1}=e,{onUpdate:o=(()=>{})}=e;r=r.push(p.after($.now(),0).toISO());return g((()=>{const t=()=>{if(i)return;const t=p.fromDateTimes(p.fromISO(r.last()).start,$.now()).toISO(),e=r.set(-1,t).reduce(((t,e)=>p.fromISO(e).toDuration().plus(t)),k.fromMillis(0)).toFormat(l);n!==e&&(a(0,n=e),a(2,r=r.set(-1,t)),o(r))};t(),window.updateTimer=t,s=setInterval(t,500)})),v((()=>{clearInterval(s)})),t.$$set=t=>{a(1,e=x(x({},e),w(t))),"timeFormat"in t&&a(4,l=t.timeFormat),"intervals"in t&&a(2,r=t.intervals),"isPaused"in t&&a(3,i=t.isPaused),"onUpdate"in t&&a(5,o=t.onUpdate)},e=w(e),[n,e,r,i,l,o,()=>{a(3,i=!i),i||a(2,r=r.push(p.after($.now(),0).toISO()))}]}class nt extends t{constructor(t){super(),e(this,t,st,at,a,{timeFormat:4,intervals:2,isPaused:3,onUpdate:5,togglePause:6})}get togglePause(){return this.$$.ctx[6]}}const{document:lt}=M;function rt(t,e,a){const s=t.slice();return s[18]=e[a],s[20]=a,s}function it(t){let e,a,s,n;function l(e){t[12](e)}function r(e){t[13](e)}let i={intervals:t[0].workIntervals,onUpdate:t[10]};return void 0!==t[2]&&(i.togglePause=t[2]),void 0!==t[3]&&(i.isPaused=t[3]),e=new nt({props:i}),K.push((()=>Q(e,"togglePause",l))),K.push((()=>Q(e,"isPaused",r))),{c(){b(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){P(e,t,a),n=!0},p(t,n){const l={};1&n&&(l.intervals=t[0].workIntervals),!a&&4&n&&(a=!0,l.togglePause=t[2],D((()=>a=!1))),!s&&8&n&&(s=!0,l.isPaused=t[3],D((()=>s=!1))),e.$set(l)},i(t){n||(y(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function ot(t){let e,a,n,i;return a=new R({props:{size:"48"}}),{c(){e=s("div"),b(a.$$.fragment),this.h()},l(t){e=l(t,"DIV",{class:!0});var s=r(e);E(a.$$.fragment,s),s.forEach(o),this.h()},h(){c(e,"class","fixed top-8 text-blueGray-400 transform -translate-x-1/2 left-1/2")},m(t,s){u(t,e,s),P(a,e,null),i=!0},i(t){i||(y(a.$$.fragment,t),O((()=>{n||(n=U(e,Y,{duration:100},!0)),n.run(1)})),i=!0)},o(t){T(a.$$.fragment,t),n||(n=U(e,Y,{duration:100},!1)),n.run(0),i=!1},d(t){t&&o(e),V(a),t&&n&&n.end()}}}function ct(t){let e,a;return e=new H({props:{size:"24"}}),{c(){b(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,s){P(e,t,s),a=!0},i(t){a||(y(e.$$.fragment,t),a=!0)},o(t){T(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function ut(t){let e,a;return e=new J({props:{size:"24"}}),{c(){b(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,s){P(e,t,s),a=!0},i(t){a||(y(e.$$.fragment,t),a=!0)},o(t){T(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function ft(t,e){let a,h,m,p,$,g,v,x,w,k,I,b=e[18].name+"";const E=[ut,ct],P=[];function D(t,e){return t[18].checked?0:1}function V(){return e[15](e[20])}return m=D(e),p=P[m]=E[m](e),{key:t,first:null,c(){a=s("div"),h=s("div"),p.c(),$=F(),g=s("div"),v=n(b),x=F(),this.h()},l(t){a=l(t,"DIV",{class:!0});var e=r(a);h=l(e,"DIV",{});var s=r(h);p.l(s),s.forEach(o),$=L(e),g=l(e,"DIV",{});var n=r(g);v=i(n,b),n.forEach(o),x=L(e),e.forEach(o),this.h()},h(){c(a,"class","inline-flex gap-4 cursor-pointer"),this.first=a},m(t,e){u(t,a,e),f(a,h),P[m].m(h,null),f(a,$),f(a,g),f(g,v),f(a,x),w=!0,k||(I=S(a,"click",z(V)),k=!0)},p(t,a){let s=m;m=D(e=t),m!==s&&(Z(),T(P[s],1,1,(()=>{P[s]=null})),G(),p=P[m],p||(p=P[m]=E[m](e),p.c()),y(p,1),p.m(h,null)),(!w||1&a)&&b!==(b=e[18].name+"")&&d(v,b)},i(t){w||(y(p),w=!0)},o(t){T(p),w=!1},d(t){t&&o(a),P[m].d(),k=!1,I()}}}function dt(t){let e,a,n,i,d,m;return n=new _({props:{size:"28"}}),{c(){e=s("div"),a=s("button"),b(n.$$.fragment),this.h()},l(t){e=l(t,"DIV",{class:!0});var s=r(e);a=l(s,"BUTTON",{class:!0});var i=r(a);E(n.$$.fragment,i),i.forEach(o),s.forEach(o),this.h()},h(){c(a,"class","p-5 bg-blueGray-400 text-white shadow bg-white rounded-full"),c(e,"class","fixed bottom-4 right-4 gap-3 items-center inline-flex flex-col")},m(s,l){u(s,e,l),f(e,a),P(n,a,null),i=!0,d||(m=S(a,"click",t[5]),d=!0)},p:h,i(t){i||(y(n.$$.fragment,t),i=!0)},o(t){T(n.$$.fragment,t),i=!1},d(t){t&&o(e),V(n),d=!1,m()}}}function ht(t){var e,a;let h,m,p,$,g,v,x,w,k,D,O,U,B,M,K,Q,R,Y,_,H,J,W=((null==(e=t[0])?void 0:e.title)||"Pronto!")+"",X=[],tt=new Map;$=new I({props:{class:"text-blueGray-600",size:"24"}});let et=t[0]&&it(t),at=t[3]&&t[0]&&ot(),st=(null==(a=t[0])?void 0:a.checkList.toArray())||[];const nt=t=>t[18]._id;for(let s=0;s<st.length;s+=1){let e=rt(t,st,s),a=nt(e);tt.set(a,X[s]=ft(a,e))}let ct=t[0]&&dt(t);return{c(){h=F(),m=s("div"),p=s("button"),b($.$$.fragment),g=F(),v=s("div"),et&&et.c(),x=F(),at&&at.c(),w=F(),k=s("div"),D=s("p"),O=n(W),U=F(),B=s("p"),M=n(""),K=F(),Q=s("div");for(let t=0;t<X.length;t+=1)X[t].c();R=F(),ct&&ct.c(),Y=N(),this.h()},l(t){j('[data-svelte="svelte-ihrkqk"]',lt.head).forEach(o),h=L(t),m=l(t,"DIV",{class:!0});var e=r(m);p=l(e,"BUTTON",{});var a=r(p);E($.$$.fragment,a),a.forEach(o),g=L(e),v=l(e,"DIV",{class:!0});var s=r(v);et&&et.l(s),x=L(s),at&&at.l(s),s.forEach(o),e.forEach(o),w=L(t),k=l(t,"DIV",{class:!0});var n=r(k);D=l(n,"P",{class:!0});var c=r(D);O=i(c,W),c.forEach(o),U=L(n),B=l(n,"P",{class:!0});var u=r(B);M=i(u,""),u.forEach(o),K=L(n),Q=l(n,"DIV",{class:!0});var f=r(Q);for(let l=0;l<X.length;l+=1)X[l].l(f);f.forEach(o),n.forEach(o),R=L(t),ct&&ct.l(t),Y=N(),this.h()},h(){lt.title="Focus",c(v,"class","fixed left-1/2 transform -translate-x-1/2"),c(m,"class","inline-flex items-center absolute top-0 left-0 right-0 p-4 text-blueGray-600"),c(D,"class","text-bg font-bold text-xl"),c(B,"class","font-light text-sm font-mono text-base whitespace-pre-wrap"),c(Q,"class","inline-flex flex-col gap-2 px-4 pt-4 w-full"),c(k,"class","w-full h-full inline-flex flex-col text-blueGray-600 gap-6 p-4 justify-center items-center")},m(e,a){u(e,h,a),u(e,m,a),f(m,p),P($,p,null),f(m,g),f(m,v),et&&et.m(v,null),f(v,x),at&&at.m(v,null),u(e,w,a),u(e,k,a),f(k,D),f(D,O),f(k,U),f(k,B),f(B,M),t[14](B),f(k,K),f(k,Q);for(let t=0;t<X.length;t+=1)X[t].m(Q,null);u(e,R,a),ct&&ct.m(e,a),u(e,Y,a),_=!0,H||(J=[S(p,"click",t[4]),S(B,"click",z(t[7])),S(B,"blur",t[6]),S(k,"click",t[8])],H=!0)},p(t,[e]){var a,s;t[0]?et?(et.p(t,e),1&e&&y(et,1)):(et=it(t),et.c(),y(et,1),et.m(v,x)):et&&(Z(),T(et,1,1,(()=>{et=null})),G()),t[3]&&t[0]?at?9&e&&y(at,1):(at=ot(),at.c(),y(at,1),at.m(v,null)):at&&(Z(),T(at,1,1,(()=>{at=null})),G()),(!_||1&e)&&W!==(W=((null==(a=t[0])?void 0:a.title)||"Pronto!")+"")&&d(O,W),513&e&&(st=(null==(s=t[0])?void 0:s.checkList.toArray())||[],Z(),X=A(X,e,nt,1,t,st,tt,Q,C,ft,null,rt),G()),t[0]?ct?(ct.p(t,e),1&e&&y(ct,1)):(ct=dt(t),ct.c(),y(ct,1),ct.m(Y.parentNode,Y)):ct&&(Z(),T(ct,1,1,(()=>{ct=null})),G())},i(t){if(!_){y($.$$.fragment,t),y(et),y(at);for(let t=0;t<st.length;t+=1)y(X[t]);y(ct),_=!0}},o(t){T($.$$.fragment,t),T(et),T(at);for(let e=0;e<X.length;e+=1)T(X[e]);T(ct),_=!1},d(e){e&&o(h),e&&o(m),V($),et&&et.d(),at&&at.d(),e&&o(w),e&&o(k),t[14](null);for(let t=0;t<X.length;t+=1)X[t].d();e&&o(R),ct&&ct.d(e),e&&o(Y),H=!1,q(J)}}}function mt(t,e,a){let s;B(t,et,(t=>a(11,s=t)));let n,l,r,i,o=null,c=!1;g((()=>{var t;o=null==(t=navigator.wakeLock)?void 0:t.request()})),v((()=>{null==o||o.release()}));const u=t=>{tt(n.setIn(["checkList",t,"checked"],!n.checkList.get(t).checked))};return t.$$.update=()=>{2048&t.$$.dirty&&a(0,n=s.activities.find((t=>t.state===W.READY.key))),3&t.$$.dirty&&l&&document.activeElement!==l&&a(1,l.innerText=n?(null==n?void 0:n.description)||"...":"Nenhuma outra atividade",l)},[n,l,r,i,()=>{window.history.back()},()=>{X(n)},()=>{const t=l.innerText.trim();a(1,l.contentEditable=!1,l),a(0,n=n.set("description",t)),t||a(1,l.innerText="...",l),c=!0},()=>{n&&document.activeElement!==l&&(a(1,l.innerText=n.description,l),a(1,l.contentEditable=!0,l),l.focus())},()=>{c?c=!1:null==r||r()},u,t=>{tt(n.set("workIntervals",t))},s,function(t){r=t,a(2,r)},function(t){i=t,a(3,i)},function(t){K[t?"unshift":"push"]((()=>{l=t,a(1,l),a(0,n),a(11,s)}))},t=>u(t)]}export default class extends t{constructor(t){super(),e(this,t,mt,ht,a,{})}}
